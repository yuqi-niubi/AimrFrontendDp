(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Portal"],{"50da":function(t,e,a){"use strict";a("b2e4")},b2e4:function(t,e,a){},bd8e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"border-radius",staticStyle:{"margin-top":"20px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-date-picker",{staticClass:"searchClass",staticStyle:{width:"120px"},attrs:{type:"month",size:"mini",placeholder:t.i18n.month},model:{value:t.yearMonth,callback:function(e){t.yearMonth=e},expression:"yearMonth"}}),t._v("   \n\t\t\t\t"),a("el-select",{staticClass:"searchClass",staticStyle:{width:"180px"},attrs:{size:"mini",placeholder:t.i18n.region},model:{value:t.region,callback:function(e){t.region=e},expression:"region"}},t._l(t.region_list,(function(t,e){return a("el-option",{key:"day"+e,attrs:{label:t.region_name,value:t.region_id}})})),1),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",round:"",size:"mini"},on:{click:function(e){return t.oneClickTask()}}},[t._v(t._s(t.i18n.button_distribution))])],1),a("div",{staticStyle:{width:"100%",height:"450px"},attrs:{id:"histogram"}})])],1)},n=[],s=(a("7f7f"),a("313e"),{name:"portal",data:function(){return{i18n:this.i18n.portal,yearMonth:"",task_ym:"",region_list:[],region:"01",average:"",unallocated:""}},created:function(){var t=new Date,e={year:t.getFullYear(),month:t.getMonth()+1};this.yearMonth=String(e.year)+"-"+String(e.month<10?"0"+e.month:e.month),this.task_ym=String(e.year)+String(e.month<10?"0"+e.month:e.month),this.getData(),this.getRegionList()},methods:{getData:function(){var t=this,e={};t.$axios.$request("get","main/",e,(function(e){t.average=e.response_data[0].meter_count_avg,t.unallocated=e.response_data[0].meter_count_unallocated,t.taskAllocation(e.response_data[0].emp_list)}))},getRegionList:function(){var t=this,e={};t.$axios.$request("get","region_list/",e,(function(e){t.region_list=e.region_list}))},oneClickTask:function(){var t=this;t.$confirm("タスクの割り当てを確定しますか","ヒント",{confirmButtonText:"確認",cancelButtonText:"キャンセル",type:"warning"}).then((function(){var e={task_ym:t.task_ym};t.$axios.$request("put","task_res/",e,(function(e){var a="";a="100104"==e.code?"success":"error",t.$message({message:e.message,type:a})}))})).catch((function(){}))},taskAllocation:function(t){for(var e=new Array,a=new Array,i=new Array,n=new Array,s=new Array,r=new Array,o=new Array,l=0;l<t.length;l++)e.push(t[l].emp_id),a.push(t[l].emp_cd),i.push(t[l].emp_name),n.push(t[l].emp_assigned_count),s.push(t[l].emp_not_complete_count),r.push(t[l].emp_complete_count),o.push(t[l].emp_exception_count);var c=this.$echarts.init(document.getElementById("histogram")),h={show:!0,position:"insideBottom",distance:15,align:"left",verticalAlign:"middle",rotate:90,formatter:"{c}  {name|{a}}",fontSize:16,rich:{name:{textBorderColor:"#fff"}}},u={color:["#5470c6","#91cc75","#fac858","#ee6666"],title:{text:this.i18n.unallocated+this.unallocated,left:"right",target:"self",textStyle:{color:"#e3b550",fontSize:"15"},subtext:this.i18n.average+this.average,subtextStyle:{color:"#000000",fontSize:"15"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[this.i18n.total,this.i18n.meterReading,this.i18n.noMeterReading,this.i18n.abnormal]},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},xAxis:[{type:"category",axisTick:{show:!1},data:i}],yAxis:[{type:"value"}],series:[{name:this.i18n.total,type:"bar",barGap:0,label:h,emphasis:{focus:"series"},data:n},{name:this.i18n.meterReading,type:"bar",label:h,emphasis:{focus:"series"},data:r},{name:this.i18n.noMeterReading,type:"bar",label:h,emphasis:{focus:"series"},data:s},{name:this.i18n.abnormal,type:"bar",label:h,emphasis:{focus:"series"},data:o}]};c.setOption(u);var m=this;c.on("click",(function(t){"合計"===t.seriesName?m.$router.push({name:"TaskSetting"}):m.$router.push({name:"MeterReadingStatus",params:{emp_name:t.name}})})),window.onresize=function(){c.resize()}}}}),r=s,o=(a("50da"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"4402665a",null);e["default"]=l.exports}}]);